"use strict";var express=require("express"),http=require("http"),socketIo=require("socket.io"),fs=require("fs"),path=require("path"),app=express(),server=http.createServer(app),io=socketIo(server),DATA_FILE_PATH=path.join(__dirname,"clickData.json");function loadData(){try{if(fs.existsSync(DATA_FILE_PATH)){var a=fs.readFileSync(DATA_FILE_PATH,"utf8");return JSON.parse(a)}return{globalScore:0,lastUpdated:Date.now(),dailyStats:{}}}catch(a){return console.error("Error loading data:",a),{globalScore:0,lastUpdated:Date.now(),dailyStats:{}}}}function saveData(a){try{fs.writeFileSync(DATA_FILE_PATH,JSON.stringify(a,null,2))}catch(a){console.error("Error saving data:",a)}}var gameData=loadData();app.use(express.static(path.join(__dirname,"public"))),app.get("/",function(a,t){t.sendFile(path.join(__dirname,"public","index.html"))}),io.on("connection",function(a){a.emit("initialData",{globalScore:gameData.globalScore,lastUpdated:gameData.lastUpdated}),a.on("click",function(){gameData.globalScore++;var a=(new Date).toISOString().split("T")[0];gameData.dailyStats[a]?gameData.dailyStats[a]++:gameData.dailyStats[a]=1,gameData.lastUpdated=Date.now(),saveData(gameData),io.emit("scoreUpdate",{globalScore:gameData.globalScore,lastUpdated:gameData.lastUpdated})}),a.on("requestDailyStats",function(){a.emit("dailyStatsResponse",gameData.dailyStats)})}),setInterval(function(){saveData(gameData)},6e4);var PORT=process.env.PORT||3e3;server.listen(PORT,function(){console.log("Server running on port ".concat(PORT))});
//# sourceMappingURL=server.min.js.map
